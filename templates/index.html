<!DOCTYPE html>
<html>
  <head>
    <title>Real-time People Counter</title>
    <link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='index.css') }}">
  </head>
  <body>
    <div id="body">
      <h1>Real-time People Counter</h1>
      <img id="video_feed" src="" alt="Video feed">
      <p id="num_people">Number of people: 0</p>
    </div>
    <script>
      var num_ppl = document.getElementById("num_people");
      var video_feed = document.getElementById("video_feed");

      function update_data() {
        // Make an AJAX request to get the latest data from the server
        fetch("/get_data")
          .then(function(response) {
            if (response.ok) {
              return response.json();
            } else {
              throw new Error("Error: " + response.status);
            }
          })
          .then(function(data) {
            var count = data["num_people"];

            // Update the count in the HTML
            num_ppl.innerHTML = "Number of people: " + count;
          })
          .catch(function(error) {
            console.log(error);
          });
      }

      function capture_image() {
        // Create a new image element
        var image = new Image();

        // Set the source to capture a new image
        image.src = "http://192.168.0.100:8080/shot.jpg";

        // When the image is loaded, update the video feed
        image.onload = function() {
          video_feed.src = image.src;
        };
      }

      // Update the data every 2 seconds
      setInterval(update_data, 2000);

      // Capture and display an image every 2 seconds
      setInterval(capture_image, 2000);
    </script>
  </body>
</html>














<!--<!DOCTYPE html>-->
<!--<html>-->
<!--<head>-->
<!--    <title>Image Display</title>-->
<!--    <style>-->
<!--        .image-container {-->
<!--            text-align: center;-->
<!--        }-->
<!--        .num-people {-->
<!--            text-align: center;-->
<!--            font-size: 24px;-->
<!--            margin-top: 20px;-->
<!--        }-->
<!--    </style>-->
<!--</head>-->
<!--<body>-->
<!--    <div class="image-container">-->
<!--        <img src="{{ image_path }}" alt="Image">-->
<!--    </div>-->
<!--    <div class="num-people">-->
<!--        Number of People: {{ num_people }}-->
<!--    </div>-->
<!--</body>-->
<!--</html>-->










<!--<!DOCTYPE html>-->
<!--<html>-->
<!--<head>-->
<!--    <title>Image and Num People</title>-->
<!--    <script>-->
<!--        function updateData() {-->
<!--            setInterval(() => {-->
<!--                fetch('/final_data')-->
<!--                    .then(response => response.json())-->
<!--                    .then(data => {-->
<!--                        document.getElementById('image_data').src = data.image_url;-->
<!--                        document.getElementById('num_people').textContent = data.num_people;-->
<!--                    })-->
<!--                    .catch(error => console.log(error));-->
<!--            }, 1000);-->
<!--        }-->
<!--    </script>-->
<!--</head>-->
<!--<body onload="updateData()">-->
<!--    <div>-->
<!--        <img id="image" src="" alt="Image">-->
<!--    </div>-->
<!--    <div>-->
<!--        <p id="num_people">Number of People : </p>-->
<!--    </div>-->
<!--</body>-->
<!--</html>-->





<!--<!DOCTYPE html>-->
<!--<html>-->
<!--  <head>-->
<!--    <title>Real-time People Counter</title>-->
<!--    <link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='index.css') }}">-->
<!--  </head>-->
<!--  <head>-->
<!--    <title>Real-time People Counter</title>-->
<!--  </head>-->
<!--  <body>-->
<!--  <div id="body">-->
<!--    <h1>Real-time People Counter</h1>-->
<!--    <img id="video_feed" src="http://192.168.0.113:8080/video?type=some.mjpeg" alt="Video feed">-->
<!--    <p id="num_people">Number of people: 0</p>-->
<!--  </div>-->
<!--    <script>-->
<!--      var num_ppl = document.getElementById("num_people");-->

<!--      function update_data() {-->
<!--        // Make an AJAX request to get the latest data from the server-->
<!--        var request = new XMLHttpRequest();-->
<!--        request.open("GET", "/get_data", true);-->
<!--        request.onreadystatechange = function() {-->
<!--          if (this.readyState === XMLHttpRequest.DONE && this.status === 200) {-->
<!--            // Parse the response JSON to get the data-->
<!--            var response = JSON.parse(this.responseText);-->
<!--            var count = response["num_people"];-->

<!--            // Update the image and count in the HTML-->
<!--            num_ppl.innerHTML = "Number of people: " + count;-->
<!--          }-->
<!--        }-->
<!--        request.send();-->
<!--      }-->
<!--      // Update the data every 2 seconds-->
<!--      setInterval(update_data, 1000);-->
<!--    </script>-->
<!--  </body>-->
<!--</html>-->
